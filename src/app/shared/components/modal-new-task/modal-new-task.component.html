<p-dialog 
  header="Criar Tarefa" 
  position="center"
  [resizable]="false"
  [maximizable]="false"
  [draggable]="false"
  [modal]="true" 
  [style]="{ width: '45rem', height: '40rem' }" 
  [(visible)]="visible" 
  (onHide)="onHide()"
>
    <form [formGroup]="newTaskForm">
      <div class="margin-bottom">
        <p-floatLabel>
          <input pInputText id="title" formControlName="name" class="title"/>
          <label for="title">Título da tarefa</label>
        </p-floatLabel>  
      </div>

      <div class="margin-bottom">
        <textarea 
          pInputTextarea 
          formControlName="description" 
          placeholder="Detalhes da tarefa"
          [ngClass]="{'invalid' : newTaskForm.controls['description'].touched && newTaskForm.controls['description'].dirty && !newTaskForm.controls['description'].value}"
        >
        </textarea>
      </div>

      <div class="margin-bottom">
        <div class="dropdown-group">
          <!-- importar locale -->
          <p-calendar 
            formControlName="deadline" 
            inputId="icondisplay" 
            placeholder="Deadline"
            [appendTo]="'body'"
            [iconDisplay]="'input'" 
            [showIcon]="true" 
            dateFormat="dd/mm/yy"
          />

          <p-dropdown 
            optionLabel="text"
            optionValue="value"
            placeholder="Prioridade"
            formControlName="priority"
            [options]="priority" 
          >
          </p-dropdown>
        </div>
      </div>

      <div class="margin-bottom">
        <div class="dropdown-group">
          <p-dropdown 
            optionLabel="name"
            placeholder="Responsáveis"
            formControlName="responsible"
            [ngClass]="{'invalid' : newTaskForm.controls['responsible'].touched && newTaskForm.controls['responsible'].dirty && !newTaskForm.controls['responsible'].value}"
            [options]="users" 
            [dropdownIcon]="'pi pi-search'"
          >
          </p-dropdown>

          <p-dropdown 
            optionLabel="text"
            optionValue="id"
            placeholder="Projeto"
            formControlName="project"
            [ngClass]="{'invalid' : newTaskForm.controls['project'].touched && newTaskForm.controls['project'].dirty && !newTaskForm.controls['project'].value}"
            [options]="projectsOptions" 
            [filter]="true"
            [emptyFilterMessage]="'Nenhum resultado encontrado'"
            [dropdownIcon]="'pi pi-search'"
          >
          </p-dropdown>
        </div>
      </div>

      <div class="file">
        <fa-icon [icon]="iconFile"></fa-icon>
        <span>Anexar arquivo</span>
        <span>Click here to upload</span>
      </div>
    </form>

    <div class="div-submit">
        <button label="Cancelar" (onClick)="onHide()">Cancelar</button>
        <button (click)="criarTarefa()">
          <fa-icon [icon]="addIcon" [className]="addIcon.iconName"></fa-icon>
          Criar tarefa
        </button>
    </div>
</p-dialog>